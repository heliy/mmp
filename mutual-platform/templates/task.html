{% extends "layout.html" %}
{% block title %}{{title}} - Task{% endblock %}
{% block content %}
<h2>Task: {{Title}}</h2>
<br>
<h3>{{title}}</h3>
{{content}}
<br>
<br>
<li>Poster: <a href="{{url_for('people_page', username=poster)}}">{{poster}}</a></li>
{% if helper %}
<li>Helper: <a href="{{url_for('people_page', username=helper)}}">{{helper}}</a><li>
{% endif %}
<li>Post Date: {{create_date}}</li>
<li>End Date: {{end_date}}</li>
<li>Statu: {{statu_str}}</li>
{% if score != 0 %}<li>Score: {{score}} </li>{% endif %}
<br>

{% if poster == username %}
  {% if statu_str == "ALREADY" %}
<li>Your task is still not received by other T.T</li>
  {% elif statu_str == "RECIEVED" %}
<li>Your task have been received by {{helper}} >.<</li>
  {% elif statu_str == "COMPLETE" %}
  <form action="" method="post">
      <dt>{{hepler}} complete your task, you need mark it: 0 <
	<input type="text" name="mark" size="3"> <= 5
	</dt>
    <div class="actions"><input type="submit" value="Submit"></div>
  </form>
  {% elif statu_str == "CLOSED" %}
<li>Your task have closed, and you give {{score}} to {{helper}}</li>
  {% elif statu_str == "FAILED" %}
<li>Your task have not completed before end date
    {% if helper %}
    , and system give {{BATSU}} to {{helper}}
    {% else %}
    , this task have not recieved by anyone.
    {% endif %}
</li>
  {% elif statu_str == "ABORT" %}
<li>Your task have been aborted by {{helper}} T.T</li>
  {% endif %}

{% elif not helper %}
  {% if statu_str == "ALREADY" %}
  <form action="" method="post">Want to receive this task?
    <div class="actions"><input type="submit" name="submit" value="Yes"></div>
  </form>
  {% else %}
<li>This Task Have Been Closed !</li>
  {% endif %}

{% elif helper == username %}
  {% if statu_str == "RECEIVED" %}
  <form action="" method="post">
    <dt>Have Complete it ? or Want to Abort that task?
    <div class="actions"><input type="submit" name="complete" value="Complete"></div>
    <div class="actions"><input type="submit" name="abort" value="Abort"></div>
	</dt>
  </form>
  {% elif statu_str == "COMPLETE" %}
<li>Wait for commit from poster >.< </li>
  {% elif statu_str == "CLOSED" %}
<li>You have complete this task ~ and got {{score}} points ~ </li>
  {% elif statu_str == "FAILED" %}
<li>You have not complete this task before end date, and got {{score}} points T.T <li>  
  {% elif statu_str == "ABORT" %}
<li>You ABORT complete this task, and got {{score}} points ~.~ <li>  
  {% endif %}
{% else %}
  {% if statu_str == "ALREADY" %}
  {% else %}
  {% endif %}
{% endif %}

{% endblock %}
